–¢–µ–∫—É—â–∏–π Pull Request https://github.com/mukhindev-praktikum/middle.messenger.praktikum.yandex/pull/4

# –ß–∞—Ç

* –ú–∞–∫–µ—Ç –≤ Figma: [https://www.figma.com/file/nMKeQd1eOiWN27uZpuzREb/mukhin-chat?node-id=0%3A1](https://www.figma.com/file/nMKeQd1eOiWN27uZpuzREb/mukhin-chat?node-id=0%3A1)
* –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–µ –≤ Netlify –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: [https://frosty-poincare-ded0e8.netlify.app](https://frosty-poincare-ded0e8.netlify.app)
* –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–æ–µ –≤ Heroku (—á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä docker) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: [https://praktikum-chat.herokuapp.com/](https://praktikum-chat.herokuapp.com/)

## –ß—Ç–æ —ç—Ç–æ?

C–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞, –≤—ã–ø–æ–ª–Ω—è–µ–º–∞—è –≤ —Ä–∞–º–∫–∞—Ö –æ–±—É—á–µ–Ω–∏—è –Ω–∞ –∫—É—Ä—Å–µ [–ú–∏–¥–ª —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫](https://praktikum.yandex.ru/middle-frontend/) –æ—Ç [–Ø–Ω–¥–µ–∫—Å.–ü—Ä–∞–∫—Ç–∏–∫—É–º](https://praktikum.yandex.ru) –Ω–∞ —Å–ø—Ä–∏–Ω—Ç–∞—Ö ‚Ññ1-4.

## –¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø

–°–ø—Ä–∏–Ω—Ç 4 –∏–∑ 4

## –°–ø—Ä–∏–Ω—Ç 1

https://github.com/mukhindev-praktikum/middle.messenger.praktikum.yandex/pull/1

* –°–≤—ë—Ä—Å—Ç–∞–Ω –º–∞–∫–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–∞—Ç –≤ Figma. [–°—Å—ã–ª–∫–∞ –Ω–∞ –º–∞–∫–µ—Ç](https://www.figma.com/file/nMKeQd1eOiWN27uZpuzREb/mukhin-chat?node-id=0%3A1)
* –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π [—à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä](#—à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä)
* –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å–±–æ—Ä–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º [Parcel](https://parceljs.org/) –∏ —Ä–∞–∑–¥–∞—á–∞ —Å—Ç–∞—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–º –Ω–∞ Express
* –°–≤—ë—Ä—Å—Ç–∞–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä–∞
* –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ [Netlify](https://www.netlify.com/) –∏–∑ –≤–µ—Ç–∫–∏ `deploy`. [–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ](https://frosty-poincare-ded0e8.netlify.app)

## –°–ø—Ä–∏–Ω—Ç 2

https://github.com/mukhindev-praktikum/middle.messenger.praktikum.yandex/pull/2

* –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ TypeScript
* –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —à–∏–Ω—ã —Å–æ–±—ã—Ç–∏–π (`classes/EventBus.ts`)
* –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (`classes/Block.ts`) —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–ø—Å–∞–º–∏, –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∏ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã–º —Ä–µ—Ä–µ–Ω–¥–µ—Ä–æ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–æ–ø—Å–æ–≤ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã `Proxy`)
* [–®–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä](#—à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä) –ø–µ—Ä–µ–ø–∏—Å–∞–Ω —Å —É—á—ë—Ç–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
* –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω [BemHandler](#bemhandler), —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è –∫–ª–∞—Å—Å–∞–º –∏–º–µ–Ω –ø–æ BEM.
* –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–æ —Å —É—á—ë—Ç–æ–º –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
* –ù–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ö —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
* –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∞–ª–æ–≥–∞ fetch –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–µ—Ä–≤–µ—Ä—É (`classes/HTTPTransport.ts`)

## –°–ø—Ä–∏–Ω—Ç 3

https://github.com/mukhindev-praktikum/middle.messenger.praktikum.yandex/pull/3

* –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞ (`classes/Route.ts`, `classes/Router.ts`)
* –î–æ–±–∞–≤–ª–µ–Ω —Å–ª–æ–π `api`
* –î–æ–±–∞–≤–ª–µ–Ω —Å–ª–æ–π `controllers`
* –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (`Store.ts`)
* –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω `WebSocket` –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞
* –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞ (–ø–æ–¥–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ —á–∞—Å—Ç—è–º)
* –ß–∞—Å—Ç–∏—á–Ω–æ –ø–æ–∫—Ä—ã—Ç–æ —Ç–µ—Å—Ç–∞–º–∏ (`Mocha`, `Chai`)
* –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–µ–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
  * –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  * –õ–æ–≥–∏–Ω
  * –í—ã—Ö–æ–¥
  * –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è
  * –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞
  * –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —á–∞—Ç–∞
  * –ü–æ–∏—Å–∫, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —á–∞—Ç–µ
  * –û—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
* –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ `Content-Security-Policy`
* –î–ª—è —Å–µ—Ä–≤–µ—Ä–∞ —Ä–∞–∑–¥–∞—á–∏ —Å—Ç–∞—Ç–∏–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω rate-limit

## –°–ø—Ä–∏–Ω—Ç 4

https://github.com/mukhindev-praktikum/middle.messenger.praktikum.yandex/pull/4

* –ü–µ—Ä–µ—Ö–æ–¥ —Å Parcel –Ω–∞ Webpack
* Dockerfile –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º –Ω–∞ Express
* –î–µ–ø–ª–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ Heroku

## TODO

- [ ] –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å Store
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª-–≤–æ —Ä–µ–Ω–¥–µ—Ä–æ–≤
- [ ] –ê–≤–∞—Ç–∞—Ä—ã –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- [ ] –ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø—Ä–æ–µ–∫—Ç–∞:

```bash
npm i
```

### –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞. –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Å–±–æ—Ä—â–∏–∫ [Parcel](https://parceljs.org/):

```bash
npm run build
```

–°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ–º –∑–∞ —Ñ–∞–π–ª–∞–º–∏ (–ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤):

```bash
npm run watch
```

–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Express, –Ω–∞ –ø–æ—Ä—Ç—É 3000. http://localhost:3000:

```bash
npm run start
```

–°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ–º –∑–∞ —Ñ–∞–π–ª–∞–º–∏ –∏ –∑–∞–ø—É—Å–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Express, –Ω–∞ –ø–æ—Ä—Ç—É 3000. http://localhost:3000:

```bash
npm run dev
```

–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∏ —Ç–∏–ø–æ–≤—ã–µ –æ—à–∏–±–∫–∏. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª–∞ Airbnb.

```bash
npm run lint
```

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
npm run test
```

## –®–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä `v2`

–≠–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã–π —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä.

> –í—Ç–æ—Ä–∞—è –≤–µ—Ä—Å–∏—è —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä–∞, –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è —Å —É—á—ë—Ç–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤ –Ω–æ–≤—ã—Ö "–∂–∏–≤—ã—Ö" –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö (`Block.ts`) –≤–≤–µ–¥—ë–Ω–Ω—ã—Ö –Ω–∞ —Å–ø—Ä–∏–Ω—Ç–µ 2.
> –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è –∏–º–µ–ª–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è—Ö –∏ —Ä–µ–∫—É—Ä—Å–∏–∏, –Ω–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±—ã–ª–∏ –Ω–µ–∂–∏–≤—ã–µ. –†–µ—Ä–µ–Ω–¥–µ—Ä –±—ã–ª –≤–æ–∑–º–æ–∂–µ–Ω –≤—Ä—É—á–Ω—É—é –∏ –≤—Å–µ–≥–æ —à–∞–±–ª–æ–Ω–∞ —Ü–µ–ª–∏–∫–æ–º.
> –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å `v1` –º–æ–∂–Ω–æ [–∑–¥–µ—Å—å](https://github.com/mukhindev-praktikum/middle.messenger.praktikum.yandex/pull/1).

### –ó–∞—á–µ–º –Ω—É–∂–µ–Ω —Å–≤–æ–π —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä?

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤. –û—Å–æ–±–æ–≥–æ —Å–º—ã—Å–ª–∞ –¥–µ–ª–∞—Ç—å –æ—á–µ—Ä–µ–¥–Ω–æ–π –Ω–µ—Ç.
–î–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –¥–ª—è —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏—è. –û–Ω –Ω–µ –∏–¥–µ–∞–ª–µ–Ω. –•–æ—Ç—è –≤–æ–∑–º–æ–∂–Ω–æ –≤–∞–º –æ–Ω –ø–æ–Ω—Ä–∞–≤–∏—Ç—å—Å—è üòâ.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å `Block.ts`

–°–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∫–æ–¥—É –ø—Ä–∏–º–µ—Ä–∞ (–í–Ω–∏–º–∞–Ω–∏–µ! –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ —É–ø—Ä–æ—â–µ–Ω–∞ –∏ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω–æ–π –≤ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–±–æ—Ç–µ):

#### `./index.html`

```html
...
<body class="body">
  <!-- index.ts ‚Äî —Å–∫—Ä–∏–ø—Ç —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä–∞ -->
  <script src="./index.ts"></script>
</body>
...
```

#### –®–∞–±–ª–æ–Ω –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–°—Ç—Ä–∞–Ω–∏—Ü–∞) `./index.tmpl.ts`

* `<template></template>`: –†–∞–∑–º–µ—Ç–∫–∞ —à–∞–±–ª–æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–∫–ª—é—á–µ–Ω–∞ –≤ —Ç–µ–≥ `template`. –ê—Ç—Ä–∏–±—É—Ç—ã —Å –¥–∞–Ω–Ω–æ–≥–æ —Ç–µ–≥–∞ –±—É–¥—É—Ç –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –Ω–∞ –æ–±—ë—Ä—Ç–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
* `{{key}}`: –ó–Ω–∞—á–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ props –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
* `<Components />`: –¢–µ–≥–∏ —Å –±–æ–ª—å—à–æ–π –±—É–∫–≤—ã —Å—á–∏—Ç–∞—é—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏. –ò—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä—ã `Block.ts`
* `<Components>children</Components>`: –ü–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ –º–µ–∂–¥—É —Ç–µ–≥–∞–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –≤ props.children –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
* `<Components prop1="hello" prop2={{message}} prop3={{true}} />`: –£ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∞—Ç—Ä–∏–±—É—Ç—ã —ç—Ç–æ –ø—Ä–æ–ø—Å—ã, –æ–Ω–∏ –±—É–¥—É—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ props –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –í–Ω–∏–º–∞–Ω–∏–µ! –û—á–µ—Ä–µ–¥—å –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è props: —Å–Ω–∞—á–∞–ª–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä Block.ts, –∑–∞—Ç–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã –∏–∑ —à–∞–±–ª–æ–Ω–∞.

```ts
export const template = () => `
  <template class="{{ className }}">
    <header class="{{ className }}__header">
      <h1 class="{{ className }}__title">Hello, world!</h1>
    </header>
    <main class="{{ className }}__main">
      <MyButton />
    </main>
  </template>
`;
```

#### –ö–æ—Ä–Ω–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–°—Ç—Ä–∞–Ω–∏—Ü–∞) `./index.ts`

```ts
import Block from './classes/Block';
import { compile } from './utils/templator';
// –ò–º–ø–æ—Ä—Ç —à–∞–±–ª–æ–Ω–∞
import { template } from './index.tmpl';
// –ò–º–ø–æ—Ä—Ç –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
import Button from './components/Button';
// –°—Ç–∏–ª–∏ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
import './index.scss';

// –ù–∞—Å–ª–µ–¥—É–µ–º –∫–ª–∞—Å—Å –æ—Ç Block.ts
class IndexPage extends Block {
  constructor() {
    // 'div' –æ–±—ë—Ä—Ç–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–∫–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç) 
    super('div', {
      // –î–∞–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –ø–æ–ø–∞–¥—É—Ç –≤ props –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Button
      className: 'index-page',
      // –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç <MyButton /> –≤ —à–∞–±–ª–æ–Ω–µ
      MyButton: new Button({
        label: '–ú–æ—è –∫–Ω–æ–ø–∫–∞',
        color: 'success',
        // –î–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ —Å–æ–±—ã—Ç–∏–µ–º –≤–Ω—É—Ç—Ä–∏ Button
        onClick: () => {},
      }),
    });
  }

  render() {
    // –ö–æ–º–ø–∏–ª—è—Ü–∏—è —à–∞–±–ª–æ–Ω–∞, –≤—Ç–æ—Ä—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    // –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–ø—Å—ã –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç
    return compile(template, this.props);
  }
}

// –í—Å—Ç–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
document.body.prepend(new IndexPage().getContent());
```

#### –®–∞–±–ª–æ–Ω –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `./components/Button.tmpl.ts`

–í —à–∞–±–ª–æ–Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã props –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∫–æ–º–ø–∏–ª–∏—Ä—É—é—â–µ–≥–æ –¥–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω. –≠—Ç–æ –º–æ–∂–Ω–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –¥–ª—è –∏—Ç–µ—Ä–∞—Ü–∏–π –∏ –≤—ã–≤–æ–¥—É –ø–æ —É—Å–ª–æ–≤–∏—è–º.

```ts
import { TProps } from '../../../classes/Block';

// –í —à–∞–±–ª–æ–Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã props –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∫–æ–º–ø–∏–ª–∏—Ä—É—é—â–µ–≥–æ –¥–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω
export const template = (props: TProps) => `
  <template
    class="{{ className }}"
    ${props.title ? 'title="{{ title }}"' : ''}
  >
    {{ label }}
  </template>
`;

```

#### –í–ª–æ–∂–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `./components/Button.ts`

```ts
import Block from '../../../classes/Block';
import { compile } from '../../../utils/templator';
import { template } from './Button.tmpl';
// –°—Ç–∏–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
import './Button.scss';

// –û–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
interface IButton {
  label?: string,
  color?: string,
  title?: string,
  onClick: () => void,
}

class Button extends Block {
  constructor(props: IButton) {
    // 'button' –æ–±—ë—Ä—Ç–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ (–∫–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç) 
    super('button', {
      className: 'button',
      color: props.color ?? 'primary',
      label: props.label ?? '–õ–µ–π–±–ª –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é',
      title: props.title ?? '',
      // –û–±—ä–µ–∫—Ç —Å–æ–±—ã—Ç–∏–π, –Ω–∞–∑–≤–∞–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –Ω–∞–∑–≤–∞–Ω–∏—è–º –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
      events: {
        // –ü–æ –∫–ª–∏–∫—É –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è onClick –ø–µ—Ä–µ–¥–∞–Ω–Ω–∞—è –≤ props
        click: props.onClick,
      },
    });
  }

  render() {
    return compile(template, this.props);
  }
}

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–ª–∞—Å—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
export default Button;
```

## BemHandler

–£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è –∫–ª–∞—Å—Å–∞–º –∏–º–µ–Ω –ø–æ BEM

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```ts
import BemHandler from './utils/BemHandler';
// –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞, –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏–µ –±–ª–æ–∫–∞
const bem = new BemHandler('input');
```

–ï—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –≤–µ—Ä–Ω—ë—Ç—Å—è –∏–º—è –±–ª–æ–∫–∞:

```ts
bem.get() // input
```

–ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å —Å—Ç—Ä–æ–∫—É –≤ –ø–µ—Ä–≤—ã–π –ø–∞—Ä–∞–º–µ—Ä, –≤–µ—Ä–Ω—ë—Ç—Å—è –∏–º—è —ç–ª–µ–º–µ–Ω—Ç–∞ –±–ª–æ–∫–∞:

```ts
bem.get('label') // input__label
```

–ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤–æ –≤—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä —Å—Ç—Ä–æ–∫—É, –æ–Ω–∞ –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º:

```ts
bem.get('label', 'active') // input__label_active
```

–ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤–æ –≤—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫, –ø–æ–ª—É—á–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤:

```ts
bem.get('label', ['active', 'large']) // input__label_active input__label_large
```

–ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤–æ –≤—Ç–æ—Ä–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –æ–±—ä–µ–∫—Ç, –ø–æ–ª—É—á–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤.
–ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫–∞ ‚Äî –ø–æ–ª—É—á–∏–º –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–∏–ø–∞ –∫–ª—é—á_–∑–Ω–∞—á–µ–Ω–∏–µ.
–ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ true ‚Äî –ø–æ–ª—É—á–∏–º –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–∏–ø–∞ –∑–Ω–∞—á–µ–Ω–∏–µ.
–ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ false ‚Äî –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–µ –≤–µ—Ä–Ω—ë—Ç—Å—è.

```ts
bem.get('label', { color: 'red', large: false, active: true }) // input__label_color_red input__label_active
```

–ï—Å–ª–∏ –Ω—É–∂–Ω—ã –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –±–ª–æ–∫–∞, –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –≤ –ø–µ—Ä–≤–æ–º –∑–Ω–∞—á–µ–Ω–∏–∏:

```ts
bem.get('', { color: 'red', large: false, active: true }) // input_color_red input_active
```

–¢—Ä–µ—Ç–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä –º–∏–∫—Å ‚Äî –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –∫–∞–∫ –µ—Å—Ç—å:

```ts
bem.get('', '', 'main-page') // input main-page
```

–ü—Ä–∏–º–µ—Ä —Å–æ –≤—Å–µ–º–∏ —Ç—Ä–µ–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

```ts
bem.get('label', { color: 'red'}, 'main-page') // input__label input__label_color_red main-page
```
